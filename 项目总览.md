# ğŸ“¦ MT5 EAæˆæƒç®¡ç†ç³»ç»Ÿ - é¡¹ç›®æ€»è§ˆ

## ğŸ¯ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„MT5 EAæˆæƒç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ï¼š
- ğŸŒ æˆæƒç®¡ç†ç½‘ç«™ï¼ˆNext.js + Reactï¼‰
- ğŸ”Œ æˆæƒéªŒè¯APIæ¥å£
- ğŸ’» MT5 EAéªŒè¯ä»£ç ï¼ˆMQL5ï¼‰
- ğŸ“š å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£

## ğŸ“ æ–‡ä»¶ç»“æ„è¯´æ˜

```
sqwz1126/
â”‚
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ next.config.js            # Next.jsé…ç½®
â”‚   â”œâ”€â”€ tsconfig.json             # TypeScripté…ç½®
â”‚   â”œâ”€â”€ env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ .gitignore                # Gitå¿½ç•¥æ–‡ä»¶
â”‚   â””â”€â”€ .gitattributes            # Gitå±æ€§é…ç½®
â”‚
â”œâ”€â”€ ğŸ“± å‰ç«¯åº”ç”¨ï¼ˆapp/ï¼‰
â”‚   â”œâ”€â”€ layout.tsx                # å…¨å±€å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µï¼ˆé‡å®šå‘ï¼‰
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ login/                    # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx              # ç™»å½•ç•Œé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ dashboard/                # ç®¡ç†é¢æ¿
â”‚   â”‚   â””â”€â”€ page.tsx              # æˆæƒç®¡ç†ç•Œé¢
â”‚   â”‚
â”‚   â””â”€â”€ api/                      # APIæ¥å£
â”‚       â”œâ”€â”€ verify/               # EAéªŒè¯æ¥å£ï¼ˆå…¬å¼€ï¼‰
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â””â”€â”€ admin/                # ç®¡ç†å‘˜æ¥å£ï¼ˆéœ€è®¤è¯ï¼‰
â”‚           â”œâ”€â”€ login/            # ç™»å½•æ¥å£
â”‚           â”‚   â””â”€â”€ route.ts
â”‚           â”œâ”€â”€ init/             # åˆå§‹åŒ–æ¥å£
â”‚           â”‚   â””â”€â”€ route.ts
â”‚           â””â”€â”€ authorizations/   # æˆæƒç®¡ç†æ¥å£
â”‚               â”œâ”€â”€ route.ts      # åˆ—è¡¨å’Œæ·»åŠ 
â”‚               â””â”€â”€ [id]/         # æ›´æ–°å’Œåˆ é™¤
â”‚                   â””â”€â”€ route.ts
â”‚
â”œâ”€â”€ ğŸ› ï¸ å·¥å…·åº“ï¼ˆlib/ï¼‰
â”‚   â”œâ”€â”€ db.ts                     # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯å·¥å…·ï¼ˆJWTã€å¯†ç ï¼‰
â”‚   â””â”€â”€ utils.ts                  # é€šç”¨å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ ğŸ’» MT5 EAä»£ç 
â”‚   â”œâ”€â”€ MT5_EA_Authorization.mq5  # EAæˆæƒéªŒè¯ä»£ç 
â”‚   â””â”€â”€ MT5_EA_ä½¿ç”¨è¯´æ˜.txt       # EAä½¿ç”¨è¯´æ˜
â”‚
â””â”€â”€ ğŸ“š æ–‡æ¡£
    â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
    â”œâ”€â”€ éƒ¨ç½²æ–‡æ¡£.md               # è¯¦ç»†éƒ¨ç½²æ•™ç¨‹
    â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md               # å¿«é€Ÿå¼€å§‹æŒ‡å—
    â”œâ”€â”€ å›¾æ–‡éƒ¨ç½²æ•™ç¨‹.md           # å›¾æ–‡æ•™ç¨‹
    â””â”€â”€ é¡¹ç›®æ€»è§ˆ.md               # æœ¬æ–‡ä»¶
```

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯æ¨¡å—
- **æ–‡ä»¶ä½ç½®**ï¼š`lib/auth.ts`
- **åŠŸèƒ½**ï¼š
  - JWT Tokenç”Ÿæˆå’ŒéªŒè¯
  - å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
  - è¯·æ±‚è®¤è¯ä¸­é—´ä»¶

### 2. æ•°æ®åº“æ¨¡å—
- **æ–‡ä»¶ä½ç½®**ï¼š`lib/db.ts`
- **åŠŸèƒ½**ï¼š
  - è¿æ¥è…¾è®¯äº‘å¼€å‘æ•°æ®åº“
  - æ•°æ®åº“é›†åˆç®¡ç†
  - æ•°æ®æ“ä½œå°è£…

### 3. ç®¡ç†å‘˜ç™»å½•
- **å‰ç«¯**ï¼š`app/login/page.tsx`
- **åç«¯**ï¼š`app/api/admin/login/route.ts`
- **åŠŸèƒ½**ï¼š
  - ç®¡ç†å‘˜ç™»å½•éªŒè¯
  - JWT Tokené¢å‘
  - ç™»å½•çŠ¶æ€ç®¡ç†

### 4. æˆæƒç®¡ç†
- **å‰ç«¯**ï¼š`app/dashboard/page.tsx`
- **åç«¯**ï¼š`app/api/admin/authorizations/`
- **åŠŸèƒ½**ï¼š
  - æŸ¥çœ‹æˆæƒåˆ—è¡¨
  - æ·»åŠ æ–°æˆæƒ
  - å»¶æœŸæˆæƒ
  - å–æ¶ˆ/åˆ é™¤æˆæƒ
  - ç»Ÿè®¡æ•°æ®å±•ç¤º

### 5. EAéªŒè¯æ¥å£
- **åç«¯**ï¼š`app/api/verify/route.ts`
- **åŠŸèƒ½**ï¼š
  - éªŒè¯MT5è´¦å·æˆæƒ
  - è®°å½•éªŒè¯æ—¥å¿—
  - è¿”å›æˆæƒçŠ¶æ€å’Œå‰©ä½™æ—¶é—´

### 6. MT5 EAé›†æˆ
- **æ–‡ä»¶**ï¼š`MT5_EA_Authorization.mq5`
- **åŠŸèƒ½**ï¼š
  - å¯åŠ¨æ—¶éªŒè¯æˆæƒ
  - æ”¯æŒç¦»çº¿è¿è¡Œ24å°æ—¶
  - è‡ªåŠ¨ä¿å­˜éªŒè¯æ—¶é—´
  - æˆæƒå¤±è´¥å¤„ç†

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### authorizationsï¼ˆæˆæƒè¡¨ï¼‰
```javascript
{
  _id: string,                    // è‡ªåŠ¨ç”Ÿæˆçš„ID
  mt5_account: string,            // MT5è´¦å·
  authorized_at: Date,            // æˆæƒæ—¶é—´
  expires_at: Date | null,        // è¿‡æœŸæ—¶é—´ï¼ˆnull=æ°¸ä¹…ï¼‰
  is_permanent: boolean,          // æ˜¯å¦æ°¸ä¹…æˆæƒ
  duration_days: number,          // æˆæƒå¤©æ•°
  status: string,                 // active/expired/cancelled
  notes: string,                  // å¤‡æ³¨
  created_by: string,             // åˆ›å»ºäºº
  last_verified_at: Date,         // æœ€åéªŒè¯æ—¶é—´
  verify_count: number,           // éªŒè¯æ¬¡æ•°
  created_at: Date,               // åˆ›å»ºæ—¶é—´
  updated_at: Date                // æ›´æ–°æ—¶é—´
}
```

### adminsï¼ˆç®¡ç†å‘˜è¡¨ï¼‰
```javascript
{
  _id: string,                    // è‡ªåŠ¨ç”Ÿæˆçš„ID
  username: string,               // ç”¨æˆ·å
  password_hash: string,          // å¯†ç å“ˆå¸Œ
  role: string,                   // admin/super_admin
  created_at: Date,               // åˆ›å»ºæ—¶é—´
  last_login_at: Date             // æœ€åç™»å½•æ—¶é—´
}
```

### verification_logsï¼ˆéªŒè¯æ—¥å¿—è¡¨ï¼‰
```javascript
{
  _id: string,                    // è‡ªåŠ¨ç”Ÿæˆçš„ID
  mt5_account: string,            // MT5è´¦å·
  result: string,                 // success/failed
  message: string,                // æ¶ˆæ¯
  ip_address: string,             // IPåœ°å€
  created_at: Date                // åˆ›å»ºæ—¶é—´
}
```

## ğŸ”„ ç³»ç»Ÿæµç¨‹å›¾

### æˆæƒéªŒè¯æµç¨‹
```
EAå¯åŠ¨
  â†“
è·å–MT5è´¦å·
  â†“
å°è¯•åœ¨çº¿éªŒè¯ â†’ å‘é€HTTPè¯·æ±‚åˆ° /api/verify
  â†“                              â†“
æˆåŠŸ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœåŠ¡å™¨éªŒè¯æˆæƒçŠ¶æ€
  â†“                              â†“
ä¿å­˜éªŒè¯æ—¶é—´                    è¿”å›æˆæƒä¿¡æ¯
  â†“
EAæ­£å¸¸è¿è¡Œ

å¦‚æœåœ¨çº¿éªŒè¯å¤±è´¥ï¼š
  â†“
æ£€æŸ¥ç¦»çº¿ç¼“å­˜
  â†“
è·ä¸Šæ¬¡éªŒè¯ < 24å°æ—¶ï¼Ÿ
  â†“
æ˜¯ â†’ ç»§ç»­è¿è¡Œï¼ˆç¦»çº¿æ¨¡å¼ï¼‰
å¦ â†’ åœæ­¢è¿è¡Œ
```

### ç®¡ç†å‘˜æ“ä½œæµç¨‹
```
è®¿é—®ç½‘ç«™
  â†“
ç™»å½•é¡µé¢ â†’ è¾“å…¥ç”¨æˆ·åå¯†ç 
  â†“
éªŒè¯æˆåŠŸ â†’ è·å¾—JWT Token
  â†“
ç®¡ç†é¢æ¿
  â†“
â”œâ”€ æŸ¥çœ‹æˆæƒåˆ—è¡¨
â”œâ”€ æ·»åŠ æ–°æˆæƒ â†’ é€‰æ‹©æ—¶é•¿ â†’ ä¿å­˜åˆ°æ•°æ®åº“
â”œâ”€ å»¶æœŸæˆæƒ â†’ æ›´æ–°è¿‡æœŸæ—¶é—´
â””â”€ å–æ¶ˆæˆæƒ â†’ æ›´æ–°çŠ¶æ€ä¸ºcancelled
```

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. è®¤è¯å®‰å…¨
- JWT Tokenè®¤è¯ï¼ˆ7å¤©æœ‰æ•ˆæœŸï¼‰
- å¯†ç bcryptåŠ å¯†å­˜å‚¨
- è¯·æ±‚å¤´AuthorizationéªŒè¯

### 2. é€šä¿¡å®‰å…¨
- HTTPSåŠ å¯†é€šä¿¡
- ç¯å¢ƒå˜é‡ä¿æŠ¤æ•æ„Ÿä¿¡æ¯
- APIæ¥å£è®¿é—®æ§åˆ¶

### 3. æ•°æ®å®‰å…¨
- æ•°æ®åº“è®¿é—®æƒé™æ§åˆ¶
- éªŒè¯æ—¥å¿—è®°å½•
- å®šæœŸå¤‡ä»½æœºåˆ¶

## ğŸ“Š ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|--------|
| JWT_SECRET | âœ… | JWTç­¾åå¯†é’¥ | `your-secret-key-123` |
| TCB_ENV_ID | âœ… | äº‘å¼€å‘ç¯å¢ƒID | `mt5-auth-xxxxx` |
| TCB_SECRET_ID | âŒ | äº‘å¼€å‘å¯†é’¥IDï¼ˆå¯é€‰ï¼‰ | `AKIDxxxxx` |
| TCB_SECRET_KEY | âŒ | äº‘å¼€å‘å¯†é’¥Keyï¼ˆå¯é€‰ï¼‰ | `xxxxx` |
| DEFAULT_ADMIN_USERNAME | âœ… | é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·å | `admin` |
| DEFAULT_ADMIN_PASSWORD | âœ… | é»˜è®¤ç®¡ç†å‘˜å¯†ç  | `admin123456` |

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼1ï¼šè…¾è®¯äº‘Webifyï¼ˆæ¨èï¼‰
- âœ… ä¸€é”®éƒ¨ç½²
- âœ… è‡ªåŠ¨æ„å»º
- âœ… è‡ªåŠ¨HTTPS
- âœ… å…è´¹é¢åº¦
- ğŸ“„ è¯¦è§ï¼š`éƒ¨ç½²æ–‡æ¡£.md`

### æ–¹å¼2ï¼šæœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:3000
```

### æ–¹å¼3ï¼šå…¶ä»–å¹³å°
- Vercel
- Netlify
- è‡ªå»ºæœåŠ¡å™¨

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### Gitå‘½ä»¤
```bash
# åˆå§‹åŒ–
git init

# æäº¤ä»£ç 
git add .
git commit -m "æäº¤è¯´æ˜"
git push

# æŸ¥çœ‹çŠ¶æ€
git status
```

### npmå‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸ“– æ–‡æ¡£å¯¼èˆª

### æ–°æ‰‹å…¥é—¨
1. å…ˆçœ‹ï¼š`å¿«é€Ÿå¼€å§‹.md` - äº†è§£åŸºæœ¬æµç¨‹
2. å†çœ‹ï¼š`å›¾æ–‡éƒ¨ç½²æ•™ç¨‹.md` - è·Ÿç€æˆªå›¾æ“ä½œ
3. è¯¦ç»†ï¼š`éƒ¨ç½²æ–‡æ¡£.md` - å®Œæ•´éƒ¨ç½²æ­¥éª¤

### åŠŸèƒ½ä½¿ç”¨
- `README.md` - é¡¹ç›®è¯´æ˜å’ŒAPIæ–‡æ¡£
- `MT5_EA_ä½¿ç”¨è¯´æ˜.txt` - EAé›†æˆæ•™ç¨‹

### æŠ€æœ¯å‚è€ƒ
- `é¡¹ç›®æ€»è§ˆ.md` - æœ¬æ–‡ä»¶ï¼Œäº†è§£é¡¹ç›®ç»“æ„
- ä»£ç æ³¨é‡Š - æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰è¯¦ç»†æ³¨é‡Š

## ğŸ†˜ å¸¸è§é—®é¢˜å¿«é€Ÿç´¢å¼•

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ | æ–‡æ¡£ä½ç½® |
|------|----------|----------|
| å¦‚ä½•éƒ¨ç½²ï¼Ÿ | è·Ÿç€æ•™ç¨‹ä¸€æ­¥æ­¥æ“ä½œ | `å¿«é€Ÿå¼€å§‹.md` |
| Gitæ¨é€å¤±è´¥ï¼Ÿ | é…ç½®Gitç”¨æˆ·ä¿¡æ¯ | `å›¾æ–‡éƒ¨ç½²æ•™ç¨‹.md` ç¬¬2éƒ¨åˆ† |
| éƒ¨ç½²å¤±è´¥ï¼Ÿ | æ£€æŸ¥ç¯å¢ƒå˜é‡ | `éƒ¨ç½²æ–‡æ¡£.md` ç¬¬ä¸‰æ­¥ |
| æ— æ³•ç™»å½•ï¼Ÿ | å…ˆåˆå§‹åŒ–ç³»ç»Ÿ | `éƒ¨ç½²æ–‡æ¡£.md` ç¬¬å››æ­¥ |
| EAæ— æ³•è¿æ¥ï¼Ÿ | é…ç½®WebRequest | `MT5_EA_ä½¿ç”¨è¯´æ˜.txt` ç¬¬ä¸‰éƒ¨åˆ† |
| å¦‚ä½•å¤‡ä»½ï¼Ÿ | å¯¼å‡ºæ•°æ®åº“ | `éƒ¨ç½²æ–‡æ¡£.md` ç›‘æ§å’Œç»´æŠ¤ |

## ğŸ”§ æŠ€æœ¯æ ˆç‰ˆæœ¬

```json
{
  "next": "14.0.4",
  "react": "18.2.0",
  "antd": "5.12.2",
  "typescript": "5.3.3",
  "bcryptjs": "2.4.3",
  "jsonwebtoken": "9.0.2",
  "tcb-admin-node": "2.3.1"
}
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è‡ªåŠ©æ’æŸ¥
1. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æŸ¥çœ‹Webifyæ„å»ºæ—¥å¿—
3. æŸ¥çœ‹MT5ä¸“å®¶æ—¥å¿—
4. æŸ¥çœ‹æ•°æ®åº“è®°å½•

### æ–‡æ¡£æŸ¥è¯¢
- æœç´¢å…³é”®è¯
- æŸ¥çœ‹å¸¸è§é—®é¢˜
- å‚è€ƒAPIæ–‡æ¡£

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

âœ… **ç®€å•æ˜“ç”¨**
- å›¾å½¢åŒ–ç®¡ç†ç•Œé¢
- ä¸€é”®æ·»åŠ æˆæƒ
- å®æ—¶çŠ¶æ€æ˜¾ç¤º

âœ… **å®‰å…¨å¯é **
- JWTè®¤è¯
- å¯†ç åŠ å¯†
- HTTPSé€šä¿¡

âœ… **çµæ´»é…ç½®**
- è‡ªå®šä¹‰æˆæƒæ—¶é•¿
- æ”¯æŒæ°¸ä¹…æˆæƒ
- ç¦»çº¿è¿è¡Œæ”¯æŒ

âœ… **æ˜“äºéƒ¨ç½²**
- ä¸€é”®éƒ¨ç½²åˆ°Webify
- è‡ªåŠ¨æ„å»ºéƒ¨ç½²
- è¯¦ç»†éƒ¨ç½²æ–‡æ¡£

âœ… **å®Œæ•´åŠŸèƒ½**
- å¤šç®¡ç†å‘˜æ”¯æŒ
- éªŒè¯æ—¥å¿—è®°å½•
- ç»Ÿè®¡æ•°æ®å±•ç¤º

## ğŸ“ˆ åç»­æ‰©å±•å»ºè®®

### åŠŸèƒ½æ‰©å±•
- [ ] æ‰¹é‡å¯¼å…¥æˆæƒ
- [ ] æˆæƒåˆ°æœŸæé†’
- [ ] æ›´è¯¦ç»†çš„ç»Ÿè®¡æŠ¥è¡¨
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯é€‚é…

### å®‰å…¨å¢å¼º
- [ ] åŒå› ç´ è®¤è¯
- [ ] IPç™½åå•
- [ ] æ“ä½œæ—¥å¿—å®¡è®¡
- [ ] è‡ªåŠ¨å¤‡ä»½

### æ€§èƒ½ä¼˜åŒ–
- [ ] Redisç¼“å­˜
- [ ] CDNåŠ é€Ÿ
- [ ] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

**ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿ**
ğŸ‘‰ æ‰“å¼€ `å¿«é€Ÿå¼€å§‹.md` å¼€å§‹éƒ¨ç½²ï¼

**éœ€è¦è¯¦ç»†æ•™ç¨‹ï¼Ÿ**
ğŸ‘‰ æ‰“å¼€ `å›¾æ–‡éƒ¨ç½²æ•™ç¨‹.md` è·Ÿç€æˆªå›¾æ“ä½œï¼

**é‡åˆ°é—®é¢˜ï¼Ÿ**
ğŸ‘‰ æŸ¥çœ‹ `éƒ¨ç½²æ–‡æ¡£.md` çš„å¸¸è§é—®é¢˜éƒ¨åˆ†ï¼

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€


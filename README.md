# MT5 EAæˆæƒç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„MT5 EAæˆæƒç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒé€šè¿‡ç½‘ç«™ç®¡ç†MT5è´¦å·æˆæƒï¼Œåªæœ‰æˆæƒçš„è´¦å·æ‰èƒ½è¿è¡ŒEAã€‚

## åŠŸèƒ½ç‰¹ç‚¹

âœ… **ç½‘ç«™ç®¡ç†åå°**
- å¤šç®¡ç†å‘˜æ”¯æŒ
- æˆæƒåˆ—è¡¨æŸ¥çœ‹
- æ·»åŠ /å»¶æœŸ/å–æ¶ˆæˆæƒ
- çµæ´»çš„æˆæƒæ—¶é•¿è®¾ç½®ï¼ˆè‡ªå®šä¹‰å¤©æ•°æˆ–æ°¸ä¹…ï¼‰
- å®æ—¶ç»Ÿè®¡æ•°æ®å±•ç¤º

âœ… **EAæˆæƒéªŒè¯**
- å¯åŠ¨æ—¶è‡ªåŠ¨éªŒè¯
- æ”¯æŒç¦»çº¿è¿è¡Œ24å°æ—¶
- æˆæƒçŠ¶æ€å®æ—¶æ£€æŸ¥
- è¯¦ç»†çš„æ—¥å¿—è®°å½•

âœ… **å®‰å…¨å¯é **
- JWT Tokenè®¤è¯
- HTTPSåŠ å¯†é€šä¿¡
- å¯†ç åŠ å¯†å­˜å‚¨
- éªŒè¯æ—¥å¿—è¿½è¸ª

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 14 + React + Ant Design
- **åç«¯**: Next.js API Routes
- **æ•°æ®åº“**: è…¾è®¯äº‘å¼€å‘æ•°æ®åº“ï¼ˆCloudBaseï¼‰
- **éƒ¨ç½²**: è…¾è®¯äº‘ Webify
- **EA**: MQL5

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. æ³¨å†Œè…¾è®¯äº‘è´¦å·
2. å®‰è£… Git
3. å®‰è£… Node.jsï¼ˆå¯é€‰ï¼Œç”¨äºæœ¬åœ°å¼€å‘ï¼‰

### éƒ¨ç½²æ­¥éª¤

è¯¦ç»†éƒ¨ç½²æ­¥éª¤è¯·æŸ¥çœ‹ [éƒ¨ç½²æ–‡æ¡£](./éƒ¨ç½²æ–‡æ¡£.md)

ç®€è¦æ­¥éª¤ï¼š
1. å°†ä»£ç æ¨é€åˆ° GitHub
2. åœ¨è…¾è®¯äº‘ Webify åˆ›å»ºåº”ç”¨
3. é…ç½®ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²å®Œæˆ
5. åˆå§‹åŒ–ç³»ç»Ÿ

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ app/                          # Next.jsåº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ api/                      # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ admin/                # ç®¡ç†å‘˜æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ login/            # ç™»å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ authorizations/   # æˆæƒç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ init/             # åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ verify/               # EAéªŒè¯æ¥å£
â”‚   â”œâ”€â”€ dashboard/                # ç®¡ç†é¢æ¿é¡µé¢
â”‚   â”œâ”€â”€ login/                    # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx                # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ
â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼
â”œâ”€â”€ lib/                          # å·¥å…·åº“
â”‚   â”œâ”€â”€ db.ts                     # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯å·¥å…·
â”‚   â””â”€â”€ utils.ts                  # é€šç”¨å·¥å…·
â”œâ”€â”€ MT5_EA_Authorization.mq5      # MT5 EAæˆæƒéªŒè¯ä»£ç 
â”œâ”€â”€ MT5_EA_ä½¿ç”¨è¯´æ˜.txt           # EAä½¿ç”¨è¯´æ˜
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ next.config.js                # Next.jsé…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScripté…ç½®
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

## ä½¿ç”¨è¯´æ˜

### ç®¡ç†åå°

1. è®¿é—®ç½‘ç«™å¹¶ç™»å½•ï¼ˆé»˜è®¤è´¦å·ï¼šadmin / admin123456ï¼‰
2. åœ¨æˆæƒåˆ—è¡¨é¡µé¢ç®¡ç†æˆæƒ
3. ç‚¹å‡»"æ·»åŠ æˆæƒ"æ·»åŠ æ–°çš„MT5è´¦å·æˆæƒ
4. å¯ä»¥éšæ—¶å»¶æœŸæˆ–å–æ¶ˆæˆæƒ

### MT5 EAé›†æˆ

1. æ‰“å¼€ `MT5_EA_Authorization.mq5`
2. ä¿®æ”¹æˆæƒæœåŠ¡å™¨åœ°å€ä¸ºä½ çš„åŸŸå
3. åœ¨MT5ä¸­å…è®¸WebRequestè®¿é—®ä½ çš„åŸŸå
4. ç¼–è¯‘å¹¶ä½¿ç”¨EA

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [MT5_EA_ä½¿ç”¨è¯´æ˜.txt](./MT5_EA_ä½¿ç”¨è¯´æ˜.txt)

## APIæ¥å£æ–‡æ¡£

### ç®¡ç†å‘˜æ¥å£ï¼ˆéœ€è¦è®¤è¯ï¼‰

#### ç™»å½•
```
POST /api/admin/login
Body: { username, password }
Response: { success, data: { token, username, role }, message }
```

#### è·å–æˆæƒåˆ—è¡¨
```
GET /api/admin/authorizations
Headers: Authorization: Bearer {token}
Response: { success, data: [...], message }
```

#### æ·»åŠ æˆæƒ
```
POST /api/admin/authorizations
Headers: Authorization: Bearer {token}
Body: { mt5_account, duration_days, notes }
Response: { success, data: {...}, message }
```

#### æ›´æ–°æˆæƒ
```
PUT /api/admin/authorizations/{id}
Headers: Authorization: Bearer {token}
Body: { duration_days, notes }
Response: { success, data: {...}, message }
```

#### åˆ é™¤æˆæƒ
```
DELETE /api/admin/authorizations/{id}?action=cancel|delete
Headers: Authorization: Bearer {token}
Response: { success, message }
```

### EAéªŒè¯æ¥å£ï¼ˆå…¬å¼€ï¼‰

#### éªŒè¯æˆæƒ
```
GET /api/verify?account={mt5_account}
Response: {
  success: true/false,
  data: {
    authorized: true/false,
    account: string,
    expires_at: string | null,
    is_permanent: boolean,
    remaining_days: number
  },
  message: string
}
```

## ç¯å¢ƒå˜é‡

```env
# JWTå¯†é’¥
JWT_SECRET=your-super-secret-jwt-key

# è…¾è®¯äº‘å¼€å‘ç¯å¢ƒID
TCB_ENV_ID=your-tcb-env-id

# è…¾è®¯äº‘å¯†é’¥ï¼ˆå¯é€‰ï¼‰
TCB_SECRET_ID=your-secret-id
TCB_SECRET_KEY=your-secret-key

# é»˜è®¤ç®¡ç†å‘˜è´¦å·
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123456
```

## å¸¸è§é—®é¢˜

### 1. å¦‚ä½•ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼Ÿ
ç™»å½•åå°åï¼Œå¯ä»¥æ·»åŠ æ–°çš„ç®¡ç†å‘˜è´¦å·ï¼Œç„¶ååˆ é™¤é»˜è®¤è´¦å·ã€‚

### 2. EAæ— æ³•è¿æ¥æœåŠ¡å™¨ï¼Ÿ
æ£€æŸ¥ï¼š
- MT5æ˜¯å¦å…è®¸WebRequestè®¿é—®ä½ çš„åŸŸå
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- æˆæƒæœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®

### 3. å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ
åœ¨è…¾è®¯äº‘å¼€å‘æ§åˆ¶å°å¯ä»¥å¯¼å‡ºæ•°æ®åº“æ•°æ®ã€‚

### 4. å¯ä»¥è‡ªå®šä¹‰ç¦»çº¿è¿è¡Œæ—¶é•¿å—ï¼Ÿ
å¯ä»¥ï¼Œä¿®æ”¹EAä»£ç ä¸­çš„ `OfflineHours` å‚æ•°ã€‚

### 5. æ”¯æŒå¤šå°‘ä¸ªæˆæƒè´¦å·ï¼Ÿ
ç†è®ºä¸Šæ— é™åˆ¶ï¼Œå–å†³äºæ•°æ®åº“å®¹é‡ã€‚

## å®‰å…¨å»ºè®®

1. âš ï¸ **ç«‹å³ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç **
2. ğŸ”’ ä½¿ç”¨å¼ºå¯†ç 
3. ğŸŒ ç¡®ä¿ä½¿ç”¨HTTPS
4. ğŸ“ å®šæœŸæ£€æŸ¥éªŒè¯æ—¥å¿—
5. ğŸ’¾ å®šæœŸå¤‡ä»½æ•°æ®åº“

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-11-26)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„æˆæƒç®¡ç†åŠŸèƒ½
- âœ… MT5 EAéªŒè¯æ”¯æŒ
- âœ… ç¦»çº¿è¿è¡Œæ”¯æŒ

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚

## è®¸å¯è¯

MIT License

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

